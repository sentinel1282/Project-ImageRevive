# ImageRevive Configuration - 8K/Ultra High Resolution

# System Settings
system:
  device: "cuda"  # cuda, cpu, mps
  num_workers: 4
  batch_size: 2  # Reduced for 8K processing
  precision: "fp16"  # fp32, fp16, int8
  cache_enabled: true
  cache_dir: "./cache"

# Model Settings
models:
  denoising:
    architecture: "ddpm"
    model_path: "./models/denoiser.pth"
    timesteps: 1000
    beta_schedule: "linear"
    image_size: 256
    channels: 3
    
  super_resolution:
    target_resolution: "8K"  # Default resolution
    quality_mode: "ultra"
    enable_enhancement: true
    
    # Resolution settings - CHOOSE ONE:
    
    # Option 1: Use preset resolution
    target_resolution: "8K"  # Options: 4K, 5K, 6K, 8K, 10K, 12K, 16K
    
    # Option 2: Use custom resolution (uncomment to use)
    # output_width: 7680   # Custom width
    # output_height: 4320  # Custom height
    
    # Quality settings
    quality_mode: "ultra"  # Options: fast, balanced, ultra
    enable_enhancement: true  # Enable post-processing enhancements

    # Advanced settings
    bilateral_d: 9           # Smoothing neighborhood
    bilateral_sigma: 75      # Smoothing strength
    nlm_h: 10               # Denoising strength
    unsharp_radius: 1.5     # Sharpening radius
    unsharp_percent: 100    # Sharpening amount
    
    # Advanced settings
    scale_factor: 4
    window_size: 8
    num_heads: 6
    embed_dim: 180
    depths: [6, 6, 6, 6]
    
  colorization:
    architecture: "stable_diffusion"
    model_path: "./models/colorizer.pth"
    guidance_scale: 7.5
    num_inference_steps: 50
    strength: 0.8
    
  inpainting:
    architecture: "lama"
    model_path: "./models/inpainter.pth"
    dilate_kernel_size: 15
    receptive_field: 31

# Agent Orchestration
orchestration:
  max_retries: 3
  timeout: 600  # Increased for 8K processing (10 minutes)
  parallel_execution: false
  task_priority:
    - denoising
    - super_resolution
    - colorization
    - inpainting
  quality_threshold: 0.75  # Lowered for 8K (harder to achieve high scores)

# Training Settings
training:
  epochs: 100
  learning_rate: 0.0001
  weight_decay: 0.0001
  scheduler: "cosine"
  warmup_epochs: 10
  gradient_clip: 1.0
  mixed_precision: true
  
  # Data Augmentation
  augmentation:
    random_crop: true
    crop_size: 256
    horizontal_flip: true
    vertical_flip: false
    rotation: 15
    color_jitter: 0.1
    
  # Loss Weights
  loss_weights:
    mse: 1.0
    perceptual: 0.1
    adversarial: 0.01
    
# Dataset Settings
dataset:
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1
  
  paths:
    div2k: "./data/DIV2K"
    ffhq: "./data/FFHQ"
    imagenet: "./data/ImageNet"
    urban100: "./data/Urban100"
    
  preprocessing:
    normalize: true
    resize_mode: "bicubic"
    target_size: [256, 256]

# Evaluation Metrics
metrics:
  compute_psnr: true
  compute_ssim: true
  compute_lpips: false  # Disabled for 8K (too slow)
  compute_fid: false
  save_visualizations: true

# Web Application
webapp:
  host: "0.0.0.0"
  port: 5000
  debug: false
  max_upload_size: 20  # Increased to 20MB for larger inputs
  allowed_extensions: [".jpg", ".jpeg", ".png", ".bmp", ".tiff"]
  result_retention: 7200  # 2 hours for 8K results

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "./logs/imagerevive.log"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  tensorboard_dir: "./logs/tensorboard"
  wandb_project: "imagerevive"
  wandb_enabled: false

# Performance Optimization
optimization:
  use_amp: true  # Automatic Mixed Precision
  compile_models: false  # Disabled for compatibility
  channels_last: true
  benchmark_cudnn: true
  num_threads: 8

# Resolution Presets Reference
# 4K UHD:  3840 x 2160
# 5K:      5120 x 2880
# 6K:      6144 x 3160
# 8K UHD:  7680 x 4320
# 10K:     10240 x 5760
# 12K:     12288 x 6480
# 16K:     15360 x 8640
